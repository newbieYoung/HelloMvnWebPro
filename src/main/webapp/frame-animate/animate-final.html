<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>逐帧动画例子</title>
	<script type="text/javascript" src="./js/final.js"></script>
</head>
<body>
	<script type="text/javascript">
	//总像素数组
	var totalImageData = [];
	//常量
	var body = document.querySelector('body');
	var width = 640;
	var height = 1136;
	//动画canvas
	var canvas = document.createElement('canvas');
	canvas.width = width;
	canvas.height = height;
	var context = canvas.getContext('2d');
	//图片
	var img = new Image();
	img.src = './images/final/final.png';
	img.onload = function(){
		context.drawImage(this,0,1136,width,height,0,0,width,height);
		body.appendChild(canvas);//显示第二帧
		var imageData = context.getImageData(0, 0, width, height);
		var temp = document.createElement('canvas');
		temp.width = width;
		var tempContext = temp.getContext('2d');
		// 13-14
		var worker1314 = new Worker('./js/compute.js');
		var data1314 = {};
		temp.height = diffHeight['14'];
		tempContext.drawImage(this,0,2272,640,diffHeight['14'],0,0,640,diffHeight['14']);
		data1314.data = tempContext.getImageData(0, 0, temp.width, temp.height).data;
		data1314.imageData = imageData;
		data1314.position = position['14'];
		worker1314.postMessage(data1314);
		worker1314.onmessage = function(e){
			context.clearRect(0, 0, width, height);
			context.putImageData(e.data, 0, 0, 0, 0, width, height);
			worker1314.terminate();
		};
	};
	</script>
</body>
</html>